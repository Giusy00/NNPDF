meta:
    title: Theory shift validation test, 5 point, DY-only, QR
    author: Rosalyn Pearson
    keywords: [example]

# This is a Drell-Yan only comparison. For a full comparison extend
# the datasets accordingly.

metadata_group: nnpdf31_process #!IMPORTANT! Do not remove

fivetheories: nobar

orthonormalisation: qr # Choice of orthonormalisation scheme
                       # for finding th covmat basis. Default is qr.
theoryid: 163

fit: 190315_ern_nlo_central_163_global

use_cuts: fromfit

pdf:
  from_: fit

_datasets_list_nlo: &datasets_list_nlo
  - dataset: NMCPD
  - dataset: NMC
  - dataset: SLACP
  - dataset: SLACD
  - dataset: BCDMSP
  - dataset: BCDMSD
  - dataset: CHORUSNU
  - dataset: CHORUSNB
  - dataset: NTVNUDMN
  - dataset: NTVNBDMN
  - dataset: HERACOMBNCEM
  - dataset: HERACOMBNCEP460
  - dataset: HERACOMBNCEP575
  - dataset: HERACOMBNCEP820
  - dataset: HERACOMBNCEP920
  - dataset: HERACOMBCCEM
  - dataset: HERACOMBCCEP
  - dataset: HERAF2CHARM
  - dataset: CDFZRAP
  - dataset: D0ZRAP
  - dataset: D0WEASY
  - dataset: D0WMASY
  - dataset: ATLASWZRAP36PB
  - dataset: ATLASZHIGHMASS49FB
  - dataset: ATLASLOMASSDY11EXT
  - dataset: ATLASWZRAP11
  - dataset: ATLAS1JET11
  - dataset: ATLASZPT8TEVMDIST
  - dataset: ATLASZPT8TEVYDIST
  - dataset: ATLASTTBARTOT
  - dataset: ATLASTOPDIFF8TEVTRAPNORM
  - dataset: CMSWEASY840PB
  - dataset: CMSWMASY47FB
  - dataset: CMSDY2D11
  - dataset: CMSWMU8TEV
  - {dataset: CMSZDIFF12, cfac: [NRM]}
  - dataset: CMSJETS11
  - dataset: CMSTTBARTOT
  - dataset: CMSTOPDIFF8TEVTTRAPNORM
  - dataset: LHCBZ940PB
  - dataset: LHCBZEE2FB
  - {dataset: LHCBWZMU7TEV, frac: 1.0, cfac: [NRM]}
  - {dataset: LHCBWZMU8TEV, frac: 1.0, cfac: [NRM]}

shiftconfig:     # For calculating NNLO-NLO shift

   use_cuts: fromfit
   fit: 190315_ern_nlo_central_163_global

   theoryid: 163

   dataspecs:
       - theoryid: 163
         pdf:
           from_: fit
         speclabel: "NLO"
         dataset_inputs:
                  - dataset: ATLASWZRAP36PB
                  - dataset: ATLASZHIGHMASS49FB
                  - dataset: ATLASLOMASSDY11EXT
                  - dataset: ATLASWZRAP11
                  - dataset: ATLASZPT8TEVMDIST
                  - dataset: ATLASZPT8TEVYDIST
                  - dataset: CMSWEASY840PB
                  - dataset: CMSWMASY47FB
                  - dataset: CMSDY2D11
                  - dataset: CMSWMU8TEV
                  - { dataset: CMSZDIFF12, cfac: [NRM] }
                  - dataset: LHCBZ940PB
                  - dataset: LHCBZEE2FB
                  - { dataset: LHCBWZMU7TEV, cfac: [NRM] }
                  - { dataset: LHCBWZMU8TEV, cfac: [NRM] }
                  - dataset: CDFZRAP
                  - dataset: D0ZRAP
                  - dataset: D0WEASY
                  - dataset: D0WMASY
       - theoryid: 166
         pdf:
           from_: fit
         speclabel: "NNLO"
         dataset_inputs:
              - { dataset: ATLASWZRAP36PB, cfac: [QCD]}
              - { dataset: ATLASZHIGHMASS49FB, cfac: [QCD] }
              - { dataset: ATLASLOMASSDY11EXT, cfac: [QCD] }
              - { dataset: ATLASWZRAP11, cfac: [QCD] }
              - { dataset: ATLASZPT8TEVMDIST, cfac: [QCD], sys: 10 }
              - { dataset: ATLASZPT8TEVYDIST, cfac: [QCD], sys: 10 }
              - { dataset: CMSWEASY840PB, cfac: [QCD] }
              - { dataset: CMSWMASY47FB, cfac: [QCD]}
              - { dataset: CMSDY2D11, cfac: [QCD] }
              - { dataset: CMSWMU8TEV, cfac: [QCD] }
              - { dataset: CMSZDIFF12, cfac: [QCD, NRM], sys: 10 }
              - { dataset: LHCBZ940PB, cfac: [QCD] }
              - { dataset: LHCBZEE2FB, cfac: [QCD] }
              - { dataset: LHCBWZMU7TEV, cfac: [QCD, NRM] }
              - { dataset: LHCBWZMU8TEV, cfac: [QCD, NRM] }
              - { dataset: CDFZRAP, cfac: [QCD] }
              - { dataset: D0ZRAP, cfac: [QCD] }
              - { dataset: D0WEASY, cfac: [QCD] }
              - { dataset: D0WMASY, cfac: [QCD] }

theoryconfig:  # For generating theory covariance matrix

   theoryid: 163
   point_prescription: '5 point'

   theoryids:
     from_: scale_variation_theories

   use_cuts: fromfit
   fit: 190315_ern_nlo_central_163_global

   pdf:
     from_: fit

   dataspecs:
           - theoryid: 163
             speclabel: $(\xi_F,\xi_R)=(1,1)$
             dataset_inputs: *datasets_list_nlo
           - theoryid: 177
             speclabel: $(\xi_F,\xi_R)=(2,1)$
             dataset_inputs: *datasets_list_nlo
           - theoryid: 176
             speclabel: $(\xi_F,\xi_R)=(0.5,1)$
             dataset_inputs: *datasets_list_nlo
           - theoryid: 179
             speclabel: $(\xi_F,\xi_R)=(1,2)$
             dataset_inputs: *datasets_list_nlo
           - theoryid: 174
             speclabel: $(\xi_F,\xi_R)=(1,0.5)$
             dataset_inputs: *datasets_list_nlo

template: template_test.md

dataset_report:
   meta: Null
   template_text: |
      ## Testing 5pt NLO global covariance matrix against NNLO-NLO shift
actions_:
  - report(main=true, mathjax=True)
