# How to make a report

## Compare two fits

Often times after completing a fit, one may want to quickly generate a report between
the newly made fit and another, older, fit, perhaps the baseline `t0`.

Instead of creating a `validphys` runcard from scratch, one can quickly generate such a report
using the command `vp-comparefits -i`, where the `-i` flag runs the script in interactive
mode.

The user is then prompted to enter the name of the reference fit, the baseline fit, the title of the report
(though a sensible default is suggested), the name of the author, any keywords for the report and a choice of 
whether or not to use a theory covariance matrix for the stastitical estimators that will be used in the
report (default is to include).

The resulting report produces a quick summary of the two fits, highlighting all pertinent plots and statistical
estimators. The report can be uploaded to the server by using `vp-upload output`, assuming the default output
name was used by the user.

## Generating a report from scratch

Suppose, however, that we want to generate a custom report that includes plots and statistics that are not
include as part of the report generated by `vp-comparefits`. To do so requires us to write our own `yaml` runcard
from scratch.

Suppose we want to have histograms of the χ2 per replica for some set of experimental datasets.

The calling of `validphys` actions are used as per normal. The action we are looking for is `plot_chi2dist`.

```yaml
meta:
  title: Distribution plots per replica across experiments
  author: Shayan Iranipour
  keywords: [chi2, replica, distibution, DISonly]

fit: NNPDF31_nnlo_as_0118_DISonly

pdf: NNPDF31_nnlo_as_0118_DISonly

experiments:
  from_: "fit"

theoryid: 53

use_cuts: "fromfit"

template_text: |
  # Histograms of χ2
  ## DIS only distributions
  {@experiments::experiment plot_chi2dist@}

actions_:
  - report(main=True)
```

The `report(main=True)` command is what generates the report. We can customize the formatting of the report using
`markdown` syntax. Note for example that `# Histograms of χ2` gives this section an appropriate title.

The `meta` field is important for retrieving the report once it has been uploaded to the `vp server`. The `title` and
`author` are fields that appear when browsing through reports while `keywords` allows quick retrieval of the report by
the search functionality of the server.

